{"version":3,"sources":["../../src/services/common.service.ts"],"sourcesContent":["import PGPool from '@/db_pool/pg_pool';\nimport messages from '../constants';\n\nclass CommonService {\n  public async getRows(sql: string, params?: Array<any>) {\n    const pool = new PGPool();\n    let result: any;\n\n    try {\n      if (params) result = await pool.aquery(sql, params);\n      else result = await pool.aquery(sql);\n\n      if (result.rowCount === 0) throw { message: messages.errors.notFound, status: 404 };\n\n      return { success: true, data: { result: result.rows } };\n    } catch (error) {\n      return { success: false, data: { message: error.message }, status: error.status };\n    }\n  }\n}\n\nexport default CommonService;\n"],"names":["CommonService","getRows","sql","params","pool","PGPool","result","aquery","rowCount","message","messages","errors","notFound","status","success","data","rows","error"],"mappings":"AAAA;;;;+BAqBA,SAA6B;;aAA7B,QAA6B;;+CArBV,oBAAmB;kDACjB,oBAAc;;;;;;AAEnC,IAAA,AAAMA,aAAa,GAAnB,MAAMA,aAAa;UACJC,OAAO,CAACC,GAAW,EAAEC,MAAmB,EAAE;QACrD,MAAMC,IAAI,GAAG,IAAIC,OAAM,QAAA,EAAE,AAAC;QAC1B,IAAIC,MAAM,AAAK,AAAC;QAEhB,IAAI;YACF,IAAIH,MAAM,EAAEG,MAAM,GAAG,MAAMF,IAAI,CAACG,MAAM,CAACL,GAAG,EAAEC,MAAM,CAAC,CAAC;iBAC/CG,MAAM,GAAG,MAAMF,IAAI,CAACG,MAAM,CAACL,GAAG,CAAC,CAAC;YAErC,IAAII,MAAM,CAACE,QAAQ,KAAK,CAAC,EAAE,MAAM;gBAAEC,OAAO,EAAEC,UAAQ,QAAA,CAACC,MAAM,CAACC,QAAQ;gBAAEC,MAAM,EAAE,GAAG;aAAE,CAAC;YAEpF,OAAO;gBAAEC,OAAO,EAAE,IAAI;gBAAEC,IAAI,EAAE;oBAAET,MAAM,EAAEA,MAAM,CAACU,IAAI;iBAAE;aAAE,CAAC;QAC1D,EAAE,OAAOC,KAAK,EAAE;YACd,OAAO;gBAAEH,OAAO,EAAE,KAAK;gBAAEC,IAAI,EAAE;oBAAEN,OAAO,EAAEQ,KAAK,CAACR,OAAO;iBAAE;gBAAEI,MAAM,EAAEI,KAAK,CAACJ,MAAM;aAAE,CAAC;QACpF,CAAC;IACH;CACD;MAED,QAA6B,GAAdb,aAAa"}