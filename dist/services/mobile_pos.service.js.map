{"version":3,"sources":["../../src/services/mobile_pos.service.ts"],"sourcesContent":["import { message } from '@/constants/messages';\nimport PGPool from '@/db_pool/pg_pool';\nimport { MobilePos } from '@/interfaces/mobile_pos.interface';\nimport { ResponsePattern } from '@/interfaces/response.interface';\n\nclass MobilePosService {\n  public async readMobilePos(mobilePosId: BigInt, column?: string): Promise<ResponsePattern> {\n    try {\n      const pool = new PGPool();\n      if (!column) column = '*';\n      const station = await pool.aquery(`SELECT ${column} FROM tbl_products WHERE id = '${mobilePosId}'`);\n      console.log(station);\n      if (station.rowCount === 0) return { statusCode: 400, message: message.errors.notFound };\n      return { statusCode: 200, message: message.success.ok, data: station.rows[0] };\n    } catch (e) {\n      console.log(e);\n      return { statusCode: 500, message: message.errors.internal };\n    }\n  }\n\n  public async listMobilePosByStation(stationId: BigInt, column?: string): Promise<ResponsePattern> {\n    try {\n      const pool = new PGPool();\n      if (!column) column = '*';\n      const mobilePosRows = await pool.aquery(\n        `SELECT ${column} FROM tbl_mobile_pos\n        WHERE station_id = '${stationId}'\n        ORDER BY id ASC`,\n      );\n\n      return { statusCode: 200, message: message.success.ok, data: mobilePosRows.rows };\n    } catch (e) {\n      return { statusCode: 500, message: message.errors.internal };\n    }\n  }\n\n  public gropMobilePos(mobilePosGroup: Array<MobilePos>) {\n    const result: Object = {};\n    const mobilePosGroupLength = mobilePosGroup.length;\n    for (let i = 0; i < mobilePosGroupLength; i++) {\n      const stationId = mobilePosGroup[i].station_id.toString();\n      if (!result[stationId]) {\n        result[stationId] = {};\n        result[stationId]['mobile_pos'] = [];\n      }\n\n      const mobilePostData = {\n        id: mobilePosGroup[i].id,\n        name: mobilePosGroup[i].name,\n        series_number: mobilePosGroup[i].series_number,\n        status: mobilePosGroup[i].status,\n      };\n      result[stationId]['mobile_pos'].push(mobilePostData);\n    }\n    return result;\n  }\n}\n\nexport default MobilePosService;\n"],"names":["MobilePosService","readMobilePos","mobilePosId","column","pool","PGPool","station","aquery","console","log","rowCount","statusCode","message","errors","notFound","success","ok","data","rows","e","internal","listMobilePosByStation","stationId","mobilePosRows","gropMobilePos","mobilePosGroup","result","mobilePosGroupLength","length","i","station_id","toString","mobilePostData","id","name","series_number","status","push"],"mappings":"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"}